# 1주차 20.12.24

## 🐾 진행상황
- CSAA 연습시험 2 공부 19번부터 41번까지

## 🔮 헷갈리거나 어려운 문제 목록
- 25 (고성능 아키텍처 설계)
- 30 (보안 애플리케이션 및 아키텍처 설계) - db인스턴스 암호화
- 38(보안애플리케이션 및 아키텍처 설계)- Redshift Enhanced VPC 라우팅
- 36, 40 - KMS 

## 😲 공부하면서 느낀 점 및 후기

- KMS -  마스터키?
- Redshift 개념이 아직 잘 안잡힌다 

## 👻 공부하면서 어렵거나 중요한 개념 정리

## 0. 복습
## 👑 EC2 Auto Scaling 장점
- 내결함성 향상

    인스턴스가 비정상 상태일 때, 이를 감자하여 종료한다. 이후 대체할 인스턴스를 시작한다.

    이 때, <u>여러 개의 가용영역을 사용</u>하도록 Amazon EC2 Auto Scaling을 구성할 수 있다. <b>하나의 가용영역이 사용불가 상태가 되면, 다른 가용 영역에서 새 인스턴스를 시작하여 이에 대처할 수 있다.</b>

- 가용성 향상

    항상 현재 트래픽 요구를 처리할 수 있다.

- 비용관리 개선

    필요에 따라 용량을 동적으로 확장 및 축소할 수 있다.

## 👑 메타 데이터를 저장하는 용도로 적절한 데이터저장소
- DynamoDB : 가볍고 내구성있는 스토리지

> 이외 데이터저장소들의 용도
> 
> - AWS Glacier: 아카이브 스토리지에 사용
> - AWS Redshift: 페타 바이트 기반 스토리지에 사용


## 👑 지금까지 공부한 컴퓨팅 엔진
### ⚡EC2 (IaaS)
### ⚡Beanstalk (PaaS)
웹 어플리케이션을 간편하게 배포하고 조정할 수 있는 서비스

EC2를 기반으로 돌아가는 추상적인 layer

서버의 관리를 클라우드 제공자에게 위임하는 서버리스 형태를 유지하면서, lambda의 실행 시간에 비례한 과금 정책을 회피할 수 있게 된다.

### ⚡Lambda (FaaS)
Serverless ! ! 즉, 서버 관리의 주체는 '나'가 아니고 'Amazon'이다. 

즉, <b>ElasticBeanStalk과 같이 새로운 환경, 즉 서버를 프로비저닝하는 것이 아니라</b> 새로운 정보에 빠르게 응답하는 애플리케이션을 쉽게 구축할 수 있게 해주는 컴퓨텅 서비스인 것이다.

우리는 컴퓨팅 파워를 직접 운영할 필요 없이, 코드를 제공하기만 하면 된다. AWS Lambda는 필요할 때만 코드를 실행하고 하루에 몇 번의 요청에서 초당 수천으로 자동 확장된다.

여러 가용 영역(데이터 센터)에 걸쳐서 자율적으로 컴퓨팅 파워를 유지시키고, 따로 설정하지 않더라도 트래픽에 따라 서버를 축소/확장시키는 auto scaling도 기본으로 제공받는다. 

트래픽이 적고, 얼마나 늘어날지 예측 불가능한 현재 배경에 가장 알맞다. 서비스가 커지면 과금 문제 때문에 lambda를 계속 유지하기가 어려울 것이다. lambda는 코드(함수)의 실행 시간에 비례하여 가격을 책정하는데, 일정 수준이 넘어가면 해당 트래픽의 처리기로 컴퓨팅 인프라를 직/간접적으로 따로 운영하는 것이 웬만하면 훨씬 싸다. 

관리자 관련 작업을 호스팅하는 방법 중 가장 효율적!

## 👑 CodeBuild? CodeDeploy? 이름 비슷해서 아직도 잘;
### ⚡AWS CodeBuild
소스코드 컴파일, 테스트 실행하여 배포할 소프트웨어 패키지를 생성하는 완전 관리형 CI 서비스

자체 빌드서버를 프로비저닝 및 관리할 필요 없다.

### ⚡AWS CodeDeploy
EC2, Fargate, Lambda 및 온프레미스 인스턴스 등 컴퓨티서비스에 대한 애플리케이션 배포 자동화 서비스

롤링 업데이트 및 배포 상태 추적으로 배포 중 다운 타임으로 부터 애플리케이션을 보호한다.


## 1. S3 버킷에 특정 객체 업로드 권한 제어 방식

기본적으로 모든 객체 및 버킷은 비공개

<br/>

🤔 AWS 보안자격증명이 필요할까?

🤔 AWS 보안자권한이 필요할까?

😍 미리 서명된 URL이 필요!

<br/>

사용자가 객체를 업로드하고자 할때, <b>미리 서명된 URL</b>을 수신하여 미리 서명된 URL의 생성자가 해당 객체를 업로드 권한을 보유하는 경우에만 객체 업로드 가능

미리 서명된 URL은 만료 기간까지 <u>여러번 사용 가능</u>하다

미리 서명된 URL 생성시 필요한 것
- 보안자격증명 제공 필수
- 버킷이름
- 객체키
- HTTP메서드 (객체업로드는 PUT)
- 만료날짜/시간


## 2. 데이터베이스 엔진 vs 데이터베이스 서비스
- 데이터 베이스 엔진
  
    호환 가능한 데이터베이스

    예시) 대표적인 관계형 데이터베이스 (엔진)
    - MySQL
    - MariaDB
    - Oracle
    - MSSQL
    - Amazon Aurora: MySQL 및 PostgreSQL 호환 엔터프라이즈급 데이터베이스
    

- 데이터베이스 서비스

    데이터베이스 엔진을 지원하는 데이터베이스 서비스를 제공하는 일반 서비스

    > 예시) Amazon RDS
    > 6개의 데이터베이스 엔진 지원
    >
    > ❗RDS는 데이터베이스 엔진이 아니다❗
    
## 3. DB 인스턴스 읽기 워크로드 공유 방식

DB 인스턴스에 대한 읽기 전용 복제본을 생성하여, 다른 AWS 리전에 해당 DB인스턴스에 대한 읽기 트래픽을 공유할 수 있다.

## 4. DB 인스턴스 암호화

<b>RDS 인스턴스는 생성할 때만</b>, 암호화를 활성할 수 있다.
즉, 암호화되지 않은 RDS 인스턴스에 대해서 암호화할 수 없다. 

Q. 그렇다면 기존 RDS 인스턴스가 암호화되지 않았을 때, 암호화하기 위해서 어떻게 해야할까?

A. 암호화되지 않은 DB 인스턴스의 스냅샷을 복사한다. 이후 스냅샷 사본에 암호화를 한다. 해당 스냅샷에서 새로운 DB 인스턴스를 복원하고  읽기 전용 복제본을 추가한다. 따라서 인스턴스와 읽기전용 복제본은 암호화된다.

## 5. KMS를 활용한 데이터 암호화

- S3버킷에 데이터가 업로드 된 후 KMS 암호화

    💥 AWS 키 또는 회사에서 제공한 키를 사용하여 데이터 암호화 및 복호화 불가능

- KMS는 여러 리전에서 사용할 수 있다. 즉, 키는 지역별로 다르다. 

    💥 하지만 키가 어떤 지역에서 생성되면 다른 지역으로 키를 이동/전송할 수 없다. 

## 6. AWS Organization

마스터 계정은 멤버 계정으로 교체할 수 없다.

## 7. AWS Redshift Enhanced VPC 라우팅

해당 라우팅을 사용하면,

Amazon Redshift는 Amazon VPC를 통해 클러스터와 데이터 레포지토리 간의 모든 COPY 및 UNLOAD 트래픽을 강제한다. 즉, Redshift 클러스터에 들어오고 나가는 모든 트래픽이 인터넷을 통과하지 못한다.

해당 라우팅을 사용하지 않으면,
Amazon Redshift는 다른 AWS 서비스 트래픽을 인터넷을 통해 라우팅한다.

## 8. AWS Server Migration Service(SMS)
수 천개의 온 프레미스 워크로드를 AWS로 보다 쉽고 빠르게 마이그레이션 할 수 있는 에이전트가 없느 서비스.

라이브 서버 볼륨 증분 복제 자동화할 수 있다.

대규모 서버 마이그레이션을 보다 쉽게 조정할 수 있다.